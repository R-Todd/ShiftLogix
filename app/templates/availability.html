{% extends "base.html" %}
{% block content %}
  <h2>Availability</h2>

  <!-- Update availability form -->
  <form method="post">
    <label for="day_of_week">Day of Week:</label>
    <select id="day_of_week" name="day_of_week" required>
      {% for d in ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"] %}
        <option value="{{ d }}">{{ d }}</option>
      {% endfor %}
    </select>
    <br>
    <label for="is_available">Available?</label>
    <input type="checkbox" id="is_available" name="is_available">
    <br>
    <button type="submit">Update Availability</button>
  </form>

  <!-- Flash messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class="flashes">
        {% for category, message in messages %}
          <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <!-- List your availability requests -->
  <h3>Your Availability Requests</h3>
  {% if slots %}
    <table>
      <thead>
        <tr>
          <th>Day</th>
          <th>Availability</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for record in slots %}
          <tr>
            <td>{{ record.day }}</td>
            <td>{{ record.availability }}</td>
            <td>{{ record.status }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No availability set yet.</p>
  {% endif %}

  <!-- Back to dashboard -->
  <p style="margin-top:20px;">
    <a href="{{ url_for('employee_dashboard.dashboard') }}">‚Üê Back to Dashboard</a>
  </p>
{% endblock %}
